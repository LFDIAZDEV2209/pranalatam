<div class="course-card">
  <!-- Imagen del curso -->
  <div class="course-image">
    <div class="image-placeholder" [class]="getImageClass()">
      <div class="image-content">
        <div class="course-icon" [innerHTML]="getCourseIcon()"></div>
        <span class="image-label">{{ course.title }}</span>
      </div>
    </div>
    
    <!-- Badge de nivel -->
    <div class="level-badge" [class]="getLevelClass()">
      {{ course.level }}
    </div>

    <!-- Badge de formato -->
    <div class="format-badge" [class]="getFormatClass()">
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path *ngIf="course.format === 'Online'" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        <path *ngIf="course.format === 'Presencial'" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
        <path *ngIf="course.format === 'Híbrido'" d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
      </svg>
      {{ course.format }}
    </div>
  </div>

  <!-- Contenido del curso -->
  <div class="course-content">
    <div class="course-header">
      <div class="course-category">{{ course.category }}</div>
      <div class="course-rating" *ngIf="course.rating > 0">
        <div class="stars">
          <svg *ngFor="let star of getStarArray()" width="14" height="14" viewBox="0 0 24 24" 
               [attr.fill]="star <= course.rating ? '#f6ad55' : 'none'"
               [attr.stroke]="star <= course.rating ? '#f6ad55' : '#e2e8f0'" stroke-width="1">
            <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26 "></polygon>
          </svg>
        </div>
        <span class="rating-text">{{ course.rating }}</span>
      </div>
    </div>

    <h3 class="course-title">
      <a [routerLink]="['/cursos', course.id]">{{ course.title }}</a>
      <span class="course-subtitle" *ngIf="course.subtitle">{{ course.subtitle }}</span>
    </h3>

    <p class="course-description">{{ course.description }}</p>

    <!-- Instructor -->
    <div class="course-instructor">
      <div class="instructor-avatar">
        <div class="avatar-placeholder">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </div>
      </div>
      <div class="instructor-info">
        <span class="instructor-name">{{ course.instructor.name }}</span>
        <span class="instructor-title">{{ course.instructor.title }}</span>
      </div>
    </div>

    <!-- Duración y próxima fecha -->
    <div class="course-meta">
      <div class="duration">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12,6 12,12 16,14"></polyline>
        </svg>
        <span>{{ course.duration.hours }}h / {{ course.duration.days }} días</span>
      </div>
      <div class="next-date" *ngIf="getNextSchedule()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        <span>{{ formatDate(getNextSchedule()!.startDate) }}</span>
      </div>
    </div>

    <!-- Precio y botones -->
    <div class="course-footer">
      <div class="pricing">
        <div class="price-current">
          ${{ formatPrice(getCurrentPrice()) }}
        </div>
        <div class="price-regular" *ngIf="hasEarlyDiscount()">
          <span class="original-price">${{ formatPrice(course.pricing.regular) }}</span>
          <span class="discount-badge">¡Descuento!</span>
        </div>
      </div>
      <div class="course-actions">
        <a [routerLink]="['/cursos', course.id]" class="btn btn-outline btn-sm">
          Ver Detalles
        </a>
        <button class="btn btn-primary btn-sm" (click)="enrollNow()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          Inscribirme
        </button>
      </div>
    </div>
  </div>

  <!-- Badge de disponibilidad -->
  <div class="availability-badge" *ngIf="getAvailabilityInfo().show" 
       [class]="getAvailabilityInfo().class">
    {{ getAvailabilityInfo().text }}
  </div>
</div>
